{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.alfen",
  "version": "2.0.0",
  "compatibility": ">=12.4.5",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Alfen",
    "nl": "Alfen"
  },
  "description": {
    "en": "Optimal Charging, Smarter Homes: Powering Efficiency for You and the Grid",
    "nl": "Optimaal Laden, Slimmer Huis: Voorziet in efficiëntie voor u en het net"
  },
  "category": [
    "energy"
  ],
  "permissions": [],
  "brandColor": "#008FC9",
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "Robert Raaijmakers",
    "email": "dutchfighter@live.nl"
  },
  "contributors": {
    "developers": [
      {
        "name": "Robert Raaijmakers",
        "email": "dutchfighter@live.nl"
      },
      {
        "name": "Henri Apperloo",
        "email": "apperlooh@gmail.com"
      }
    ]
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "RobertRaaijmakers"
      }
    }
  },
  "bugs": {
    "url": "https://github.com/robertraaijmakers/com.alfen/issues"
  },
  "homepage": "https://robertraaijmakers.github.io/com.alfen/",
  "support": "https://robertraaijmakers.github.io/com.alfen/",
  "homeyCommunityTopicId": 130683,
  "source": "https://github.com/robertraaijmakers/com.alfen/",
  "flow": {
    "triggers": [
      {
        "id": "operatingmode_changed",
        "title": {
          "en": "Status changed",
          "nl": "Status gewijzigd"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          }
        ]
      },
      {
        "id": "comfortchargelevel_changed",
        "title": {
          "en": "Comfort charge level changed",
          "nl": "Comfort laadniveau veranderd"
        },
        "tokens": [
          {
            "name": "comfortchargelevel",
            "type": "number",
            "title": {
              "en": "Comfort charge level",
              "nl": "Comfort laadniveau"
            },
            "example": 2500
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          }
        ]
      },
      {
        "id": "chargetype_changed",
        "title": {
          "en": "Charge mode changed",
          "nl": "Manier van laden veranderd"
        },
        "tokens": [
          {
            "name": "chargetype",
            "type": "string",
            "title": {
              "en": "Charge mode",
              "nl": "Manier van laden"
            },
            "example": "1"
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "greenshare",
        "title": {
          "en": "Set green share %",
          "nl": "Zet % groene stroom"
        },
        "titleFormatted": {
          "en": "Set green share to [[greenshare]]",
          "nl": "Zet aandeel groene stroom op [[greenshare]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "range",
            "name": "greenshare",
            "title": {
              "en": "Green share %",
              "nl": "Groene stroom %"
            },
            "min": 0,
            "max": 100,
            "step": 1,
            "label": "%"
          }
        ]
      },
      {
        "id": "comfortchargelevel",
        "title": {
          "en": "Set comfort charge level",
          "nl": "Zet comfort laadniveau"
        },
        "titleFormatted": {
          "en": "Set comfort charge level to [[comfortchargelevel]]",
          "nl": "Zet comfort laadniveau op [[comfortchargelevel]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "range",
            "name": "comfortchargelevel",
            "title": {
              "en": "Comfort charge level",
              "nl": "Comfort laadniveau"
            },
            "min": 1400,
            "max": 11000,
            "step": 1,
            "label": "W"
          }
        ]
      },
      {
        "id": "chargetype",
        "title": {
          "en": "Set charge type",
          "nl": "Zet manier van laden"
        },
        "titleFormatted": {
          "en": "Set charge type to [[chargetype]]",
          "nl": "Zet manier van laden op [[chargetype]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "dropdown",
            "name": "chargetype",
            "title": {
              "en": "Charge type",
              "nl": "Manier van laden"
            },
            "values": [
              {
                "id": "0",
                "title": {
                  "en": "Default",
                  "nl": "Standaard"
                }
              },
              {
                "id": "1",
                "title": {
                  "en": "Comfort + Solar",
                  "nl": "Comfortable + Groen"
                }
              },
              {
                "id": "2",
                "title": {
                  "en": "100% green",
                  "nl": "100% groen"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "authmode",
        "title": {
          "en": "Set authentication mode",
          "nl": "Zet authenticatie modus"
        },
        "titleFormatted": {
          "en": "Set authentication mode to [[authmode]]",
          "nl": "Zet authenticatie modus op [[authmode]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "dropdown",
            "name": "authmode",
            "title": {
              "en": "Authentication mode",
              "nl": "Authenticatie modus"
            },
            "values": [
              {
                "id": "0",
                "title": {
                  "en": "Plug and Charge",
                  "nl": "Inpluggen en laden"
                }
              },
              {
                "id": "2",
                "title": {
                  "en": "RFID",
                  "nl": "RFID"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "chargeid",
        "title": {
          "en": "Set Plug & Charge ID",
          "nl": "Zet Plug & Charge ID"
        },
        "titleFormatted": {
          "en": "Set Plug & Charge ID to [[chargeid]]",
          "nl": "Zet Plug & Charge ID op [[chargeid]]"
        },
        "hint": {
          "en": "Set the Plug & Charge ID. Leave empty to clear the ID when switching to RFID mode.",
          "nl": "Zet het Plug & Charge ID. Laat leeg om het ID te wissen bij overschakelen naar RFID-modus."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "text",
            "name": "chargeid",
            "title": {
              "en": "Charge ID",
              "nl": "Laad ID"
            },
            "placeholder": {
              "en": "ABC22DK112233 or leave empty",
              "nl": "ABC22DK112233 of laat leeg"
            }
          }
        ]
      },
      {
        "id": "enable_plug_and_charge",
        "title": {
          "en": "Enable Plug & Charge mode",
          "nl": "Activeer Plug & Charge modus"
        },
        "titleFormatted": {
          "en": "Enable Plug & Charge mode with ID [[chargeid]]",
          "nl": "Activeer Plug & Charge modus met ID [[chargeid]]"
        },
        "hint": {
          "en": "Sets auth mode to Plug & Charge (0) and sets the Plug & Charge ID in one action.",
          "nl": "Zet authenticatie modus naar Plug & Charge (0) en stelt het Plug & Charge ID in één actie in."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "text",
            "name": "chargeid",
            "title": {
              "en": "Charge ID",
              "nl": "Laad ID"
            },
            "placeholder": {
              "en": "ABC22DK112233",
              "nl": "ABC22DK112233"
            }
          }
        ]
      },
      {
        "id": "enable_rfid",
        "title": {
          "en": "Enable RFID mode",
          "nl": "Activeer RFID modus"
        },
        "titleFormatted": {
          "en": "Enable RFID mode",
          "nl": "Activeer RFID modus"
        },
        "hint": {
          "en": "Sets auth mode to RFID (2) and clears the Plug & Charge ID in one action.",
          "nl": "Zet authenticatie modus naar RFID (2) en wist het Plug & Charge ID in één actie."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          }
        ]
      },
      {
        "id": "measure_current.limit",
        "title": {
          "en": "Set current limit",
          "nl": "Beperk laadsnelheid"
        },
        "titleFormatted": {
          "en": "Set current limit to [[limit]]",
          "nl": "Beperk laadsnelheid tot [[limit]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=chargepoint"
          },
          {
            "type": "range",
            "name": "limit",
            "title": {
              "en": "Current limit",
              "nl": "Laadsnelheid"
            },
            "min": 1,
            "max": 32,
            "step": 1,
            "label": "A"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "Chargepoint",
        "nl": "Laadpaal"
      },
      "class": "evcharger",
      "capabilities": [
        "operatingmode",
        "measure_current",
        "measure_power",
        "evcharger_charging",
        "evcharger_charging_state",
        "meter_power",
        "measure_temperature",
        "measure_current.l1",
        "measure_current.l2",
        "measure_current.l3",
        "measure_voltage.l1",
        "measure_voltage.l2",
        "measure_voltage.l3",
        "measure_power.l1",
        "measure_power.l2",
        "measure_power.l3",
        "measure_current.limit",
        "measure_current.stationlimit",
        "greenshare",
        "comfortchargelevel",
        "chargetype",
        "authmode"
      ],
      "energy": {
        "evCharger": true,
        "meterPowerImportedCapability": "meter_power"
      },
      "capabilitiesOptions": {
        "measure_current.l1": {
          "title": {
            "en": "Current L1",
            "nl": "Stroomsterkte L1"
          }
        },
        "measure_current.l2": {
          "title": {
            "en": "Current L2",
            "nl": "Stroomsterkte L2"
          }
        },
        "measure_current.l3": {
          "title": {
            "en": "Current L3",
            "nl": "Stroomsterkte L3"
          }
        },
        "measure_current.limit": {
          "title": {
            "en": "Current Limit",
            "nl": "Stroomsterkte Limiet"
          },
          "min": 1,
          "max": 16,
          "step": 1,
          "setable": true
        },
        "measure_current.stationlimit": {
          "title": {
            "en": "Current Limit Station",
            "nl": "Stroomsterkte Limiet Station"
          }
        },
        "measure_voltage.l1": {
          "title": {
            "en": "Voltage L1",
            "nl": "Voltage L1"
          }
        },
        "measure_voltage.l2": {
          "title": {
            "en": "Voltage L2",
            "nl": "Voltage L2"
          }
        },
        "measure_voltage.l3": {
          "title": {
            "en": "Voltage L3",
            "nl": "Voltage L3"
          }
        },
        "measure_power.l1": {
          "title": {
            "en": "Power L1",
            "nl": "Power L1"
          }
        },
        "measure_power.l2": {
          "title": {
            "en": "Power L2",
            "nl": "Power L2"
          }
        },
        "measure_power.l3": {
          "title": {
            "en": "Power L3",
            "nl": "Power L3"
          }
        }
      },
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/chargepoint/assets/images/small.jpg",
        "large": "/drivers/chargepoint/assets/images/large.jpg",
        "xlarge": "/drivers/chargepoint/assets/images/xlarge.jpg"
      },
      "pair": [
        {
          "id": "pair"
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "chargepoint",
      "settings": [
        {
          "id": "ip",
          "type": "text",
          "label": {
            "en": "IP address",
            "nl": "IP-adres"
          },
          "hint": {
            "en": "The ip address of the Alfen charger, this must be a static IP address.",
            "nl": "Het IP-adres van de Alfen laadpaal. Dit moet een vast (statisch) IP-adres zijn."
          }
        },
        {
          "id": "username",
          "type": "text",
          "label": {
            "en": "Username",
            "nl": "Gebruikersnaam"
          },
          "hint": {
            "en": "The username to authenticate towards the charge point",
            "nl": "De gebruikersnaam om te authenticeren bij de laadpaal."
          }
        },
        {
          "id": "password",
          "type": "password",
          "label": {
            "en": "Password",
            "nl": "Wachtwoord"
          },
          "hint": {
            "en": "The password to authenticate towards the charge point",
            "nl": "Het wachtwoord om te authenticeren bij de laadpaal."
          }
        },
        {
          "id": "socketIndex",
          "type": "number",
          "label": {
            "en": "Socket",
            "nl": "Aansluiting"
          },
          "value": 1,
          "attr": {
            "min": 1,
            "max": 2
          }
        }
      ]
    }
  ],
  "capabilities": {
    "authmode": {
      "type": "enum",
      "title": {
        "en": "Authentication Mode",
        "nl": "Authenticatie Mode"
      },
      "values": [
        {
          "id": "0",
          "title": {
            "en": "Plug and Charge",
            "nl": "Inpluggen en Laden"
          }
        },
        {
          "id": "2",
          "title": {
            "en": "RFID",
            "nl": "RFID"
          }
        }
      ],
      "getable": true,
      "setable": true,
      "uiComponent": "sensor",
      "uiQuickAction": false,
      "icon": "/assets/icon.svg"
    },
    "chargetype": {
      "type": "enum",
      "title": {
        "en": "Green Comfort Level",
        "nl": "Comfortabel Laadniveau"
      },
      "values": [
        {
          "id": "0",
          "title": {
            "en": "Default",
            "nl": "Standaard"
          }
        },
        {
          "id": "1",
          "title": {
            "en": "Comfort + Green",
            "nl": "Comfortable + Groen"
          }
        },
        {
          "id": "2",
          "title": {
            "en": "100% green",
            "nl": "100% groen"
          }
        }
      ],
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "uiQuickAction": false,
      "icon": "/assets/icon.svg"
    },
    "comfortchargelevel": {
      "type": "number",
      "title": {
        "en": "Comfort Charging Level",
        "nl": "Comfortabel Laadniveau"
      },
      "units": "W",
      "getable": true,
      "setable": true,
      "min": 1400,
      "max": 11000,
      "step": 1,
      "decimals": 0,
      "uiComponent": "sensor",
      "uiQuickAction": false,
      "icon": "/assets/comfort-level.svg"
    },
    "greenshare": {
      "type": "number",
      "title": {
        "en": "Green Share",
        "nl": "Aandeel Groen"
      },
      "units": "%",
      "getable": true,
      "setable": true,
      "min": 0,
      "max": 100,
      "step": 1,
      "decimals": 0,
      "uiComponent": "sensor",
      "uiQuickAction": false,
      "icon": "/assets/green-share.svg"
    },
    "operatingmode": {
      "type": "string",
      "title": {
        "en": "Status",
        "nl": "Status"
      },
      "getable": true,
      "setable": false,
      "uiQuickAction": false,
      "icon": "/assets/operating-mode.svg"
    }
  }
}